<?xml version="1.0" encoding="UTF-8"?>

<!-- Document : AutomatedSimulation.xml Created on : 17. Dezember 2009, 17:25 
	Updated on: 15-1-10, 19h Author : vilenica Description: Purpose of the document 
	follows. -> "1 Sentry / 2 Producers / 3 Carries" / TestRemote <- -->

<!-- ******************************************************************************************** -->
<!-- ******************************************************************************************** -->
<!-- ******************************************************************************************** -->
<!-- ******************************************************************************************** -->
<!-- ENTHÄLT TEILE AUS DEM BISHERIGEN SIMULATIONS-TEIL -->
<!-- UND -->
<!-- DEM BISHERIGEN BENCHMARKING-TEIL -->
<!-- ******************************************************************************************** -->
<!-- ******************************************************************************************** -->
<!-- ******************************************************************************************** -->
<!-- ******************************************************************************************** -->
<!-- ******************************************************************************************** -->


<InvestigationConfiguration name="MarsWorldExperiments"
	applicationReference="..\\sodekovs-simulationcontrol\\target\\classes\\jadex\\simulation\\examples\\marsworld\\MarsWorld4SimulationExperiments.application.xml"
	applicationConfiguration="TestRemote" nameOfSpace="my2dspace">
	<!-- <InvestigationConfiguration name="MarsWorldExperiments" applicationReference="..\\jadex-applications-bdi\\target\\classes\\jadex\\bdi\\examples\\marsworld\MarsWorld.application.xml" 
		applicationConfiguration="1 Sentry / 2 Producers / 3 Carries"> -->

	<Imports>
		<Import>jadex.extension.envsupport.evaluation.XYChartDataConsumer</Import>
		<Import>jadex.extension.envsupport.environment.*</Import>
		<Import>sodekovs.investigation.evaluation.*</Import>
	</Imports>

	<Dataproviders>
		<Dataprovider name="homebaselogger2">
			<!-- <Source name="$ore" sourcetype="ISpaceObject" objecttype="homebase" 
				aggregate="false">$object.ore</Source> -->
			<Source name="$homebase" sourcetype="ISpaceObject" objecttype="homebase" />
			<Data name="ore_amount">$homebase.ore</Data>
			<Data name="time">$tick</Data>
		</Dataprovider>
		<Dataprovider name="homebaselogger223">
			<!-- <Source name="$ore" sourcetype="ISpaceObject" objecttype="homebase" 
				aggregate="false">$object.ore</Source> -->
			<Source name="$homebase" sourcetype="ISpaceObject" objecttype="homebase" />
			<Data name="ore_amount">$homebase.ore</Data>
			<Data name="time">$tick</Data>
		</Dataprovider>
	</Dataproviders>

	<Dataconsumers>
		<Dataconsumer name="homebaseConsumer" clazz="XYChartDataConsumer">
			<MixedProperty name="dataprovider">"homebaselogger2"</MixedProperty>
			<MixedProperty name="title">"Evaluation of homebase"
			</MixedProperty>
			<MixedProperty name="labelx">"Time"</MixedProperty>
			<MixedProperty name="labely">"Collected Ore"</MixedProperty>
			<MixedProperty name="seriesname_0">"Collected Ore"</MixedProperty>
			<MixedProperty name="valuex_0">"time"</MixedProperty>
			<MixedProperty name="valuey_0">"ore_amount"</MixedProperty>
		</Dataconsumer>
		<Dataconsumer name="homebaseConsumerReloaded" clazz="XYChartDataConsumer">
			<MixedProperty name="dataprovider">"homebaselogger2"</MixedProperty>
			<MixedProperty name="title">"Evaluation of homebase"
			</MixedProperty>
			<MixedProperty name="labelx">"Collected Ore"</MixedProperty>
			<MixedProperty name="labely">"Time"</MixedProperty>
			<MixedProperty name="seriesname_0">"Collected Ore"</MixedProperty>
			<MixedProperty name="valuex_0">"ore_amount"</MixedProperty>
			<MixedProperty name="valuey_0">"time"</MixedProperty>
		</Dataconsumer>
		<Dataconsumer name="simConsumer" clazz="SimulationDataConsumer">
			<MixedProperty name="dataprovider">"homebaselogger2"</MixedProperty>
			<MixedProperty name="time" filter="last" /><!-- HACK: Denotes 
				the filter type ->last= only the last value is of interest. -->
		</Dataconsumer>

		<!--<Dataconsumer name="homebaseConsumer" clazz="SimulationLogger"> <MixedProperty 
			name="dataprovider">"homebaselogger2"</MixedProperty> <MixedProperty name="title">"Logging 
			Simulation"</MixedProperty> <MixedProperty name="filelocation">"C:\simulation\marsworld.log"</MixedProperty> 
			</Dataconsumer> -->
	</Dataconsumers>

	<DataVisualization>
		<Input>Reference to a data-field of the observers</Input>
		<Function name="MeanValue" aggregate="all" />
		<!-- DiagramType, Aggregation of different data, text on x/y-axis -->
	</DataVisualization>

	<!-- Optional: -->
	<Persist>
		<!-- Options: Which filenName, Type, DB-Connector etc. -->
		<!-- type="file"/"DB" -->
		<!-- File Location -->
	</Persist>

	<Optimization>
		<!-- Der Wert dieses Parameters gehört dann auf jeden Fall in die LogDatei. -->
		<!-- TODO: Nesting of Parameters! -->
		<!--<Data name="PheromoneDiffusion"> -->
		<!-- Referenz auf oben oder neues -->
		<!-- <ObjectSource type="ISpaceObject" name="Pheromone"/> <ElementSource 
			type="Property" name="Diffusion" class="Int"/> --><!-- Add type of element: String, long, int etc.? -->
		<!--</Data> -->
		<Data name="NumberOfSentries"> <!-- Referenz to $args.value in application.xml -->
			<ObjectSource type="BDIAgent" name="Sentry" />
			<ElementSource type="AgentNumber" name="AgentNumber"
				class="Int" /><!-- Add type of element: String, double, int -->
		</Data>

		<Data name="NumberOfProducers"> <!-- Referenz to $args.value in application.xml -->
			<ObjectSource type="BDIAgent" name="Producer" />
			<ElementSource type="AgentNumber" name="AgentNumber"
				class="Int" /><!-- Add type of element: String, double, int -->
		</Data>

		<Data name="NumberOfCarries"> <!-- Referenz to $args.value in application.xml -->
			<ObjectSource type="BDIAgent" name="Carry" />
			<ElementSource type="AgentNumber" name="AgentNumber"
				class="Int" /><!-- Add type of element: String, double, int -->
		</Data>


		<!-- Important: Number of sweeps has to be equal with number of rows! -->
		<ParameterSweeping strategy="recursively"> <!-- space, list or algorithm (algorithm is not implemented yet!) -->
			<Configuration type="space" name="NumberOfCarries"
				start="2" end="4" step="1" class="int" />
			<Configuration type="list" name="NumberOfSentries"
				values="2;" class="int" />
			<Configuration type="list" name="NumberOfProducers"
				values="2;3;" class="int" />
			<!-- <Configuration type="list" name="NumberOfProducers" values="1;2;" 
				class="int" /> --><!-- Has to be comma separated list, with a comma as last character. -->
		</ParameterSweeping>
		<Algorithm>
			<Input></Input>
			<Configuration></Configuration>
		</Algorithm>
	</Optimization>

	<RunConfiguration>
		<General rows="2" parallelRuns="1" delta="true"><!-- For all runs. -->
			<!-- Delay of start time can be defined relatively or absolute. -->
			<!-- <StartTime value="2010-06-29 10:50:00" type="absolute" /> -->
			<!-- <StartTime value="6500" type="relative" /> -->

			<!-- delta=um bei paralleler Ausführung zu Verhindern, dass Seeds von 
				Randoms gleich sind. -->
			<TerminateCondition>
				<TerminationTime value="30000" type="relative" />
			</TerminateCondition>
		</General>
		<Rows experiments="3">
			<TerminateCondition>
				<!-- <TerminationTime value="10000" type="relative" /> --><!-- relatively, absolute or tick_based -->

				<SemanticCondition
					condition="$object.getProperty(&quot;ore&quot;) >=
					55">
					<ObjectSource type="ISpaceObject" name="homebase" />
				</SemanticCondition>

				<!-- <SemanticCondition condition="$beliefbase.tmpCounter>= 13"> <ObjectSource 
					type="BDIAGENT" name="Sentry" /> </SemanticCondition> -->
			</TerminateCondition>
		</Rows>
	</RunConfiguration>
	<BenchmarkingSetup>
		<!-- ******************************************************************************************** -->
		<!-- ******************************************************************************************** -->
		<!-- AB HIER FOLGT DER URSPRÜNGLICHE BENCHMARKING TEIL -->
		
		
		<Schedule type="Workload" name="W2" warmUpTime="1000">

			<TerminateCondition>
				<TerminationTime value="80000" type="relative" />
				<!-- <SemanticCondition condition="$object.getProperty(&quot;ore&quot;) 
					>= 55"> <ObjectSource type="ISpaceObject" name="homebase" /> </SemanticCondition> -->

				<!-- <TargetFunction function="$beliefbase.tmpCounter>= 13"> <ObjectSource 
					type="BDIAgent" name="Sentry" /> </TargetFunction> -->
			</TerminateCondition>
			<SytemUnderTest>
				<Properties>
					<Property name="appFilePath"
						value="../sodekovs-simulationcontrol/src/main/java/jadex/simulation/examples/marsworld/MarsWorld4Benchmarking.application.xml"></Property>
					<Property name="appConfiguration" value="TestRemote"></Property>
					<!-- This property is required. -->
					<Property name="spaceName" value="my2dspace"></Property>
				</Properties>
			</SytemUnderTest>
			<!-- ScaleFactor: Is used to scale the CRUD-operations for the components: 
				multiplies the defined numbers with this factor. -->
			<Sequences scaleFactor="3.0">
				<Sequence starttime="2500" actiontype="create">
					<!--<RepeatConfiguration type="stochasticDistribution" typeOfStochasticDistribution="normal" 
						alpha="5000" sigma="2500" /> -->
					<RepeatConfiguration type="stochasticDistribution"
						typeOfStochasticDistribution="poisson" lambda="6000" />
					<Actions>
						<Action componentname="SentryW1" componenttype="BDIAgent"
							componentmodel="../sodekovs-simulationcontrol/src/main/java/jadex/simulation/examples/marsworld/sentry/Sentry.agent.xml"
							numberOfComponents="1">
							<Properties>
								<Property name="sspeed" value="22"></Property>
							</Properties>
						</Action>
					</Actions>
				</Sequence>
				<Sequence starttime="2000" actiontype="create">
					<RepeatConfiguration type="list"
						values="9000;12000;24000;35000" />
					<Actions>
						<Action componentname="SentryW1" componenttype="BDIAgent"
							componentmodel="../sodekovs-simulationcontrol/src/main/java/jadex/simulation/examples/marsworld/sentry/Sentry.agent.xml"
							numberOfComponents="1">
							<Properties>
								<Property name="sspeed" value="22"></Property>
							</Properties>
						</Action>
					</Actions>
				</Sequence>
				<Sequence starttime="12000" actiontype="delete">
					<RepeatConfiguration type="space" step="3000"
						end="20000" />
					<Actions>
						<Action componentname="SentryW1" componenttype="BDIAgent"
							componentmodel="jadex.simulation.examples.marsworld.sentry.sentry"
							numberOfComponents="2">
							<Properties>
								<Property name="sspeed" value="22"></Property>
							</Properties>
						</Action>
					</Actions>
				</Sequence>
				<Sequence starttime="4000" actiontype="create">
					<RepeatConfiguration type="space" step="3000" />
					<Actions>
						<Action componentname="Homebase" componenttype="ISpaceObject"
							componentmodel="homebase">
							<Properties>
								<Property name="speed" value="42"></Property>
							</Properties>
						</Action>
					</Actions>
				</Sequence>
			</Sequences>
			<BenchmarkingEvaluation>
				<Dataproviders>
					<Dataprovider name="homebaselogger">
						<Source name="$homebase" sourcetype="ISpaceObject"
							objecttype="homebase" />
						<Data name="ore_amount">$homebase.ore</Data>
						<Data name="time">$tick</Data>
					</Dataprovider>
				</Dataproviders>

				<Dataconsumers>
					<Dataconsumer name="homebaseConsumer" clazz="XYChartDataConsumer">
						<MixedProperty name="dataprovider">"homebaselogger"</MixedProperty>
						<MixedProperty name="title">"Evaluation of homebase"
						</MixedProperty>
						<MixedProperty name="labelx">"Time"</MixedProperty>
						<MixedProperty name="labely">"Collected Ore"</MixedProperty>
						<MixedProperty name="seriesname_0">"Collected Ore"</MixedProperty>
						<MixedProperty name="valuex_0">"time"</MixedProperty>
						<MixedProperty name="valuey_0">"ore_amount"</MixedProperty>
					</Dataconsumer>
					<Dataconsumer name="homebaseConsumerReloaded" clazz="XYChartDataConsumer">
						<MixedProperty name="dataprovider">"homebaselogger"</MixedProperty>
						<MixedProperty name="title">"Evaluation of homebase"
						</MixedProperty>
						<MixedProperty name="labelx">"Collected Ore"</MixedProperty>
						<MixedProperty name="labely">"Time"</MixedProperty>
						<MixedProperty name="seriesname_0">"Collected Ore"</MixedProperty>
						<MixedProperty name="valuex_0">"ore_amount"</MixedProperty>
						<MixedProperty name="valuey_0">"time"</MixedProperty>
					</Dataconsumer>
					<!-- <Dataconsumer name="simConsumer" clazz="SimulationDataConsumer"> 
						<MixedProperty name="dataprovider">"homebaselogger"</MixedProperty> <MixedProperty 
						name="time" filter="last"/> --><!-- HACK: Denotes the filter type ->last= only the last value is of 
						interest. -->
					<!-- </Dataconsumer> -->
				</Dataconsumers>
			</BenchmarkingEvaluation>

			<!-- The following elements are used for a time analysis of the ability 
				of the system to detect "incidents", i.e. any type of event that requires 
				an system adaption (reconfiguration). It consists of three parts: 1.) "IncidentEvent": 
				defines the exact type of incident 2.) "AdaptionEvent": the system starts 
				to reconfigure 3.) "SystemReadyEvent": the system has accomplished the adaption. -->
			<AdaptationAnalysis>
				<TargetDefinition name="Adapt1">
					<IncidentEvent condition="$object.getProperty(&quot;ore&quot;) >=
					10">
						<ObjectSource type="ISpaceObject" name="homebase" />
					</IncidentEvent>
					<AdaptationEvent condition="$object.getProperty(&quot;ore&quot;) >=
					45">
						<ObjectSource type="ISpaceObject" name="homebase" />
					</AdaptationEvent>
					<SystemReadyEvent
						condition="$object.getProperty(&quot;ore&quot;) >=
					85">
						<ObjectSource type="ISpaceObject" name="homebase" />
					</SystemReadyEvent>
				</TargetDefinition>
				<TargetDefinition name="Adapt2">
					<IncidentEvent condition="$object.getProperty(&quot;ore&quot;) >=
					50">
						<ObjectSource type="ISpaceObject" name="homebase" />
					</IncidentEvent>
					<AdaptationEvent condition="$object.getProperty(&quot;ore&quot;) >=
					75">
						<ObjectSource type="ISpaceObject" name="homebase" />
					</AdaptationEvent>
					<SystemReadyEvent
						condition="$object.getProperty(&quot;ore&quot;) >=
					95">
						<ObjectSource type="ISpaceObject" name="homebase" />
					</SystemReadyEvent>
				</TargetDefinition>
			</AdaptationAnalysis>
		</Schedule>
	</BenchmarkingSetup>
</InvestigationConfiguration>



