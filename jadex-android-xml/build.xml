<?xml version="1.0"?>
<project name="jadex-android-xml" default="generateSources" basedir=".">
	<!-- Sets variables which can later be used. -->
	<!-- The value of a property is accessed via ${} -->
	<property name="jadex-xml" location="../jadex-xml/src/main/java" />
	
	<!-- target source directory -->
	<property name="src_android" location="src/gen/java" />

	<!-- 8 = android 2.2 -->
	<property name="androidVersion" value="8" />

	<property name="exclude" value=".svn"/>


	<property name="exclude-jadex-xml" value="
		tutorial,
		" />
	
	<taskdef name="preprocess" classname="com.objfac.prebop.ant.PreprocessorTask">
		<classpath>
			<pathelement location="../jadex-android-misc/libs/preprocessor.jar" />
		</classpath>
	</taskdef>

	<target name="clean">
		<delete dir="${src_android}" />
	</target>

	<!-- Creates the source directory-->
	<target name="makedir">
		<mkdir dir="${src_android}" />
	</target>

	<!-- Preprocesses .java files -->
	<target name="generateSources" depends="clean">
		<property name="android" value="true" />
		<echo level="info">preprocessing ${jadex-xml}</echo>
		<preprocess indir="${jadex-xml}" outdir="${src_android}" out="merge" except="${exclude}, ${exclude-jadex-xml}">
			<filetype commentend="*/" commentbegin="/*" extensions="java" />
			<var name="android" value="${android}" />
			<var name="androidVersion" value="${androidVersion}" />
		</preprocess>
	</target>

	<!-- This target preprocesses and applies changes IN-PLACE. 
	The original files are altered. -->
	<target name="inplace">
		<property name="android" value="false" />
		<property name="androidVersion" value="8" />
		<preprocess indir="${jadex-xml}" outdir="${jadex-xml}" out="merge" except="${exclude}, ${exclude-jadex-xml}">
			<var name="android" value="${android}" />
			<var name="androidVersion" value="${androidVersion}" />
			<filetype commentend="*/" commentbegin="/*" extensions="java" />
		</preprocess>
	</target>
</project>
