allprojects
{
	version = '2.5-SNAPSHOT'
	group = 'net.sourceforge.jadex'
	
    //configurations 
    //{
    //    all*.exclude group: "commons-logging", module: "commons-logging"
    //}

	configurations 
	{
    	deployerJars
	}
	
	dependencies 
	{
    	deployerJars "org.apache.maven.wagon:wagon-ssh:2.2"
	}
 
    repositories 
    {
        mavenCentral()
		maven 
		{
			name 'www1'
			url 'http://www1.activecomponents.org/nexus/content/repositories/snapshots/'
			credentials 
			{
	    		username 'jadex'
	          	password '***REMOVED***'
	    	}
	    }
    }
    
    ext."signing.keyId" = 'B6C31C37'
    ext."signing.secretKeyRingFile" = '../docs/keys/secring.gpg'
    ext."signing.password" = 'lax' 
}

subprojects 
{
	apply plugin: 'java'
	apply plugin: 'maven'
	apply plugin: 'maven-publish'
	apply plugin: 'signing'
	
	sourceCompatibility = 1.6
	sourceSets.main.resources.srcDirs	'src/main/java'
	sourceSets.test.resources.srcDirs	'src/test/java'
	
    dependencies 
    {
        testCompile 'junit:junit:4.11'
    }
    
    signing 
    {
    	sign configurations.archives
	}
    
    publishing 
	{
	    publications 
	    {
	        mavenJava(MavenPublication) 
	        {
	            from components.java
	        }
	    }
	}
	
	//uploadArchives 
	//{
    //	repositories 
    //	{
    //    	add project.repositories.www1
    //	}
	//}
	
	uploadArchives 
	{
    	repositories.mavenDeployer 
    	{
        	configuration = configurations.deployerJars
        	repository(url: "http://www2.activecomponents.org/nexus/content/repositories/snapshots/") 
        	{
            	authentication(userName: "deployment", password: "laxlax")
        	}
    	}
	}	
}

task docs(type: Javadoc) {
    source subprojects.collect {project -> project.sourceSets.main.allJava } 
    classpath = files(subprojects.collect {project -> project.sourceSets.main.compileClasspath}) 
    destinationDir = new File(projectDir, 'build/docs')
    options.links("http://docs.oracle.com/javase/7/docs/api/")
}







