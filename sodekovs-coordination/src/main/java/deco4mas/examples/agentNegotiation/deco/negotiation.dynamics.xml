<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<MASDynamic name="negotiation">
	<system_properties>
		<!-- Roles in MASdynamics -->
		<role_occupations>
			<!-- Role ServiceOfferer -->
			<role_occupation name="ServiceOfferer" multiple="true">
				<agent id="ServiceManagementAgent">
					<elements>
						<element id="requiredServices" type="BDI_BELIEFSET" />
						<element id="requiredServices" type="INTERNAL_EVENT" />
						<element id="initiateNegotiation" type="INTERNAL_EVENT" />
						<element id="negotiationContract" type="INTERNAL_EVENT" />
						<element id="negotiationContractReply" type="INTERNAL_EVENT" />
					</elements>
				</agent>
			</role_occupation>
			<!-- Role ServiceSupplier -->
			<role_occupation name="ServiceSupplier" multiple="true">
				<agent id="ServiceAgent">
					<elements>
						<element id="mediumRegister" type="INTERNAL_EVENT" />
						<element id="negotiationContract" type="INTERNAL_EVENT" />
						<element id="negotiationContractReply" type="INTERNAL_EVENT" />
					</elements>
				</agent>
			</role_occupation>
			<!-- Role TrustOwner -->
			<role_occupation name="TrustOwner" multiple="true">
				<agent id="ServiceManagementAgent">
					<elements>
						<element id="trustEvent" type="INTERNAL_EVENT" />
					</elements>
					<constraints>
					<!-- only active if belief useTrust == true	-->
						<condition name="useTrust">$beliefbase.useTrust
					</condition>
					</constraints>
				</agent>
			</role_occupation>
			<!-- Role TrustSubject -->
			<role_occupation name="TrustSubject" multiple="true">
				<agent id="ServiceAgent">
					<elements>
						<element id="executedServices" type="BDI_BELIEFSET" />
						<element id="executedServices" type="INTERNAL_EVENT" />
						<element id="executionOccur" type="INTERNAL_EVENT" />
					</elements>
					<constraints>
						<!-- only active if belief useTrust == true	-->
						<condition name="useTrust">$beliefbase.useTrust
					</condition>
					</constraints>
				</agent>
			</role_occupation>
		</role_occupations>
	</system_properties>

	<causalities>
		<!-- Links between roles -->
		<deco_links>
			<!-- negotiation -->
			<deco_link realization="by_neg" type="POSITIVE" name="neg">
				<froms>
					<from>ServiceOfferer</from>
					<from>ServiceSupplier</from>
				</froms>
				<tos>
					<to>ServiceOfferer</to>
					<to>ServiceSupplier</to>
				</tos>
			</deco_link>
			<!-- trust -->
			<deco_link realization="by_trust" type="POSITIVE" name="trust">
				<froms>
					<from>TrustSubject</from>
				</froms>
				<tos>
					<to>TrustOwner</to>
				</tos>
			</deco_link>
		</deco_links>
		<direct_links>
			<direct_link realization="by_directInternalEvent" type="POSITIVE"
				name="direct">
				<froms>
					<from>ServiceOfferer</from>
					<from>ServiceSupplier</from>
				</froms>
				<tos>
					<to>ServiceOfferer</to>
					<to>ServiceSupplier</to>
				</tos>
			</direct_link>
		</direct_links>
		<direct_link_configurations>
			<direct_link_configuration id="by_directInternalEvent">
				<from>
					<agent_element element="requiredServices" agent_id="ServiceManagementAgent"
						type="BDI_BELIEFSET">
					</agent_element>
					<agent_element element="executedServices" agent_id="ServiceAgent"
						type="BDI_BELIEFSET">
					</agent_element>
				</from>
				<configuration></configuration>
				<to>
					<agent_element element="requiredServices" agent_id="ServiceManagementAgent"
						type="INTERNAL_EVENT">
						<parameter_mappings>
							<mapping class="RequiredService" ref="value" name="service" />
						</parameter_mappings>
					</agent_element>
					<agent_element element="executedServices" agent_id="ServiceAgent"
						type="INTERNAL_EVENT">
						<parameter_mappings>
							<mapping class="ExecutedService" ref="value" name="execution" />
						</parameter_mappings>
					</agent_element>
				</to>
			</direct_link_configuration>
		</direct_link_configurations>

		<!-- The detailed configuration of interdependency enactment. -->
		<deco-link-realizations>
			<!-- negotiation -->
			<realization id="by_neg">
				<from>
					<!-- ServiceManagementAgent -->
					<agent_element element="initiateNegotiation"
						agent_id="ServiceManagementAgent" type="INTERNAL_EVENT">
						<parameter_mappings>
							<mapping class="NegotiationInformation" ref="information"
								name="information" />
						</parameter_mappings>
					</agent_element>
					<agent_element element="negotiationContractReply"
						agent_id="ServiceManagementAgent" type="INTERNAL_EVENT">
						<parameter_mappings>
							<mapping class="NegotiationInformation" ref="information"
								name="information" />
						</parameter_mappings>
					</agent_element>
					<!-- ServiceAgent -->
					<agent_element element="mediumRegister" agent_id="ServiceAgent"
						type="INTERNAL_EVENT">
						<parameter_mappings>
							<mapping class="NegotiationInformation" ref="information"
								name="information" />
						</parameter_mappings>
					</agent_element>
					<agent_element element="negotiationContractReply"
						agent_id="ServiceAgent" type="INTERNAL_EVENT">
						<parameter_mappings>
							<mapping class="NegotiationInformation" ref="information"
								name="information" />
						</parameter_mappings>
					</agent_element>
				</from>
				<mechanism_configuration mechanism_id="neg"
					agent_type="JADEX">
				</mechanism_configuration>
				<to>
					<!-- ServiceManagementAgent -->
					<agent_element element="foundSa" agent_id="ServiceManagementAgent"
						type="INTERNAL_EVENT">
						<parameter_mappings>
							<mapping class="NegotiationInformation" ref="information"
								name="information" />
						</parameter_mappings>
					</agent_element>
					<agent_element element="negotiationContract"
						agent_id="ServiceManagementAgent" type="INTERNAL_EVENT">
						<parameter_mappings>
							<mapping class="NegotiationInformation" ref="information"
								name="information">
							</mapping>
						</parameter_mappings>
					</agent_element>
					<!-- ServiceAgent -->
					<agent_element element="negotiationContract"
						agent_id="ServiceAgent" type="INTERNAL_EVENT">
						<parameter_mappings>
							<mapping class="NegotiationInformation" ref="information"
								name="information">
							</mapping>
						</parameter_mappings>
					</agent_element>
				</to>
			</realization>
			<!-- trust -->
			<realization id="by_trust">
				<from>
					<!-- ServiceAgent -->
					<agent_element element="executionOccur" agent_id="ServiceAgent"
						type="INTERNAL_EVENT">
						<parameter_mappings>
							<mapping class="TrustInformation" ref="information" name="information" />
						</parameter_mappings>
					</agent_element>
				</from>
				<mechanism_configuration mechanism_id="trust"
					agent_type="JADEX">
				</mechanism_configuration>
				<to>
					<!-- ServiceManagementAgent -->
					<agent_element element="trustEvent" agent_id="ServiceManagementAgent"
						type="INTERNAL_EVENT">
						<parameter_mappings>
							<mapping class="TrustInformation" ref="information" name="information" />
						</parameter_mappings>
					</agent_element>
				</to>
			</realization>
		</deco-link-realizations>
	</causalities>
</MASDynamic>