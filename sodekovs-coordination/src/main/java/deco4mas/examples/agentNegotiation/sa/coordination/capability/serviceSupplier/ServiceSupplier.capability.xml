<?xml version="1.0" encoding="UTF-8"?>
	<!--
		The ServiceSupplier capability encapsulate requirements to find a
		contract through a coordination medium
	-->
<capability xmlns="http://jadex.sourceforge.net/jadex-bdi"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://jadex.sourceforge.net/jadex-bdi
	                    http://jadex.sourceforge.net/jadex-bdi-2.0.xsd"
	package="deco4mas.examples.agentNegotiation.sa.coordination.capability.serviceSupplier"
	name="ServiceSupplier">

	<imports>
		<import>jadex.base.fipa.*</import>
		<import>jadex.application.runtime.*</import>
		<import>jadex.bridge.IComponentIdentifier</import>
		<import>deco4mas.coordinate.environment.*</import>
		<import>deco4mas.examples.agentNegotiation.common.dataObjects.*</import>
		<import>deco4mas.examples.agentNegotiation.common.trustInformation.*</import>
		<import>deco4mas.examples.agentNegotiation.common.negotiationInformation.*</import>
		<import>deco4mas.examples.agentNegotiation.sma.coordination.negotiationStrategy.*</import>
		<import>deco4mas.examples.agentNegotiation.sma.application.*</import>
	</imports>
	
	<capabilities>
		<!--  Can be in a trustOwner role (capability)	-->
		<capability name="tscap"
			file="deco4mas.examples.agentNegotiation.sa.coordination.capability.serviceSupplier.trustSubject.TrustSubject" />
	</capabilities>

	<beliefs>
		<!--  blackout	-->
		<belief name="blackout" class="boolean">
			<fact>false</fact>
		</belief>
		
		<!--signed-->
		<belief name="signed" class="boolean">
			<fact>false</fact>
		</belief>

		<beliefref name="providedService">
			<abstract />
		</beliefref>

		<beliefref name="serviceAgentType">
			<abstract />
		</beliefref>
	</beliefs>

	<plans>
		<plan name="contractReceive">
			<body class="ContractReceivePlan"></body>
			<trigger>
				<internalevent ref="negotiationContract"></internalevent>
			</trigger>
		</plan>

		<plan name="signEnd">
			<body class="SignEndPlan"></body>
			<trigger>
				<messageevent ref="signEnd">
				</messageevent>
			</trigger>
		</plan>
		
		<plan name="register">
			<body class="RegisterAtMediumPlan"></body>
			<trigger>
				<factchanged ref="blackout"/>
			</trigger>
		</plan>
	</plans>

	<events>
		<!-- send -->
		<internalevent name="contractSealed">
			<parameter name="contract" class="ServiceContract"></parameter>
		</internalevent>

		<!--	receive	-->
		<messageevent name="signEnd" type="fipa" direction="receive">
			<parameter name="performative" class="String" direction="fixed">
				<value>SFipa.INFORM</value>
			</parameter>
		</messageevent>
		
		<!-- deco event when a new execution occur by agent-->
		<internalevent name="negotiationContract">
			<parameter name="information" class="NegotiationInformation"></parameter>
		</internalevent>

		<!--deco send-->
		<internalevent name="mediumRegister">
			<parameter name="information" class="NegotiationInformation"></parameter>
		</internalevent>
		<internalevent name="negotiationContractReply">
			<parameter name="information" class="NegotiationInformation"></parameter>
		</internalevent>
		
		<!--deco event REFERENCE to capability-->
		<internaleventref name="executionOccur">
			<concrete ref="tscap.executionOccur" />
		</internaleventref>
		<internaleventref name="executedServices">
			<concrete ref="tscap.executedServices" />
		</internaleventref>
	</events>
	
<!--	<configurations>-->
<!--		<configuration name="default">-->
<!--			<plans>-->
<!--				<initialplan ref="register"></initialplan>-->
<!--			</plans>-->
<!--		</configuration>-->
<!--	</configurations>-->
</capability>
