<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<MASDynamic name="heterogeneous_example">
	<!--
		Heterogeneous agents example: This example shows how different agent types (micro and BDI) could be coordinated using the framework.
		The 'SayHelloStep' IComponentStep in the example micro agent and the 'sayhello' goal in the example BDI agent are observed by the framework
		and the events are published over the coordination medium to the 'receivehello' internal event in the example BDI agent and the 'ReceiveHelloStep'
		IComponentStep in the exmaple micro agent. Both observed events pass a parameter message as a string to the received agents. So two by the framework
		observed events at the sender side result in four triggered events at the receiver side.
	-->

	<!--
		System Properties: Definitions of the behaviors that agents can adopt
		and that makes them: - engage in coordinative activities - react to
		coordinative activities
	-->
	<system_properties>
		<role_occupations>
			<role_occupation name="sender" multiple="false">
				<agent id="ExampleMicro" />
				<agent id="ExampleBDI" />
			</role_occupation>
			<role_occupation name="receiver" multiple="false">
				<agent id="ExampleMicro" />
				<agent id="ExampleBDI" />
			</role_occupation>
		</role_occupations>
	</system_properties>


	<!--
		Causal links: Definition of the interdependencies between
		agent-behaviors.
	-->
	<causalities>
		<deco_links>
			<!-- The encated interdependency: -->
			<deco_link realization="by_tuple" type="POSITIVE" name="send-receive" spaces="mycoordspace">
				<froms>
					<from>sender</from>
				</froms>
				<tos>
					<to>receiver</to>
				</tos>
			</deco_link>
		</deco_links>

		<!-- The detailed configuration of interdependency enactment. -->
		<deco-link-realizations>
			<realization id="by_tuple">
				<from>		<!-- Published behaviors / events: -->
					<agent_element element="SayHelloStep" agent_id="ExampleMicro" type="MICRO_STEP">
						<parameter_mappings>
							<mapping ref="message" name="message"/>
						</parameter_mappings>
					</agent_element>
					<agent_element element="sayhello" agent_id="ExampleBDI" type="BDI_GOAL">
						<parameter_mappings>
							<mapping ref="message" name="message"/>
						</parameter_mappings>
					</agent_element>
				</from>
				<!-- Coordination Medium configuration: -->
				<mechanism_configuration
					mechanism_id="deco4mas.mechanism.mediated.tspaces.Mediated(TSpaces)"
					agent_type="JADEX">
					<properties>
						<entry>
							<key>delay</key>
							<value>10</value>
						</entry>
						<entry>
							<key>polling</key>
							<value>1000</value>
						</entry>
						<entry>
							<key>positioner</key>
							<value>deco4mas.examples.mediated.tspaces.ExamplePositioner
							</value>
						</entry>
						<entry>
							<key>size:Y</key>
							<value>4</value>
						</entry>
						<entry>
							<key>size:X</key>
							<value>4</value>
						</entry>
						<entry>
							<key>expiration</key>
							<value>10000</value>
						</entry>
						<entry>
							<key>propagation</key>
							<value>3000</value>
						</entry>
						<entry>
							<key>TTL</key>
							<value>2</value>
						</entry>
					</properties>
				</mechanism_configuration>
				<to>		<!-- Behaviors / events to be triggered upon reception: -->
					<agent_element element="receivehello" agent_id="ExampleBDI" type="INTERNAL_EVENT">
						<parameter_mappings>
							<mapping ref="message" name="message"/>
						</parameter_mappings>
					</agent_element>
					<agent_element element="ReceiveHelloStep" agent_id="ExampleMicro" type="MICRO_STEP">
						<parameter_mappings>
							<mapping ref="message" name="message"/>
						</parameter_mappings>
					</agent_element>
				</to>
			</realization>
		</deco-link-realizations>
	</causalities>
</MASDynamic>