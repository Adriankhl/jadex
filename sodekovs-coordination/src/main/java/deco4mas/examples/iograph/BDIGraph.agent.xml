<agent xmlns="http://jadex.sourceforge.net/jadex" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://jadex.sourceforge.net/jadex
	                    http://jadex.sourceforge.net/jadex-bdi-2.0.xsd"
	name="BDIGraph" package="deco4mas.examples.iograph">
	
	<imports>
		<import>jadex.extension.envsupport.environment.space2d.*</import>
		<import>jadex.extension.envsupport.environment.*</import>
		<import>jadex.extension.envsupport.math.*</import>
		<import>jadex.extension.envsupport.dataview.*</import>
		<import>jadex.extension.envsupport.observer.perspective.*</import>
		<import>jadex.bdi.planlib.*</import>
		<import>jadex.bridge.service.*</import>
		<import>jadex.commons.future.*</import>
		<import>java.util.*</import>
		<import>deco4mas.coordinate.environment.*</import>
		<import>deco4mas.coordinate.*</import>
		<import>deco4mas.examples.heterogeneous.*</import>
	</imports>
	
	<beliefs>
		<!-- Environment. -->
		<belief name="env" class="CoordinationSpace">
			<fact>(CoordinationSpace)$scope.getParent().getExtension("mycoordspace").get(new ThreadSuspendable())</fact>
		</belief>
	</beliefs>
	
	<goals>
		<!-- This goal is observed by the coordination framework -->
		<achievegoal name="send_message">
			<parameter name="message" class="String" />
		</achievegoal>
	</goals>
	
	<events>
		<!-- This internal event is called by the coordination framework -->
		<internalevent name="receive_message">
			<parameter name="receivedId" class="String" />
		</internalevent>
	</events>
	
	<plans>
		<!-- The initial plan -->
		<plan name="initplan">
			<body class="InitialPlan" />
		</plan>
		
		<!-- Dummy plan consumes the send_message goal event -->
		<plan name="dummyplan">
			<body class="DummyPlan" />
			<trigger>
				<goal ref="send_message" />
			</trigger>
		</plan>
		
		<!-- This plan is triggered by the 'receive_message' internal event -->
		<plan name="receive_message">
			<body class="ReceiveMessagePlan"/>
			<trigger>
				<internalevent ref="receive_message" />
			</trigger>
			<parameter name="message" class="String">
				<internaleventmapping ref="receive_message.receivedId"/>
			</parameter>
		</plan>
	</plans>
	
	<configurations>
		<configuration name="default" />
	</configurations>
</agent>		