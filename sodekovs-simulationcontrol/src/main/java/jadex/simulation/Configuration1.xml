<?xml version="1.0" encoding="UTF-8"?>

	<!--
		Document : AutomatedSimulation.xml Created on : 17. Dezember 2009,
		17:25 Updated on: 15-1-10, 19h Author : vilenica Description: Purpose
		of the document follows.
	-->

<SimulationConfiguration name="MarsWorldExperiments"
	applicationReference="..\\sodekovs-simulationcontrol\\target\\classes\\jadex\\simulation\\examples\\marsworld\\MarsWorld4SimulationExperiments.application.xml"
	applicationConfiguration="1 Sentry / 2 Producers / 3 Carries">
	<!--
		<SimulationConfiguration name="MarsWorldExperiments"
		applicationReference="..\\jadex-applications-bdi\\target\\classes\\jadex\\bdi\\examples\\marsworld\MarsWorld.application.xml"
		applicationConfiguration="1 Sentry / 2 Producers / 3 Carries">
	-->

	<Imports>
		<Import>jadex.extension.envsupport.evaluation.*</Import>
		<Import>jadex.simulation.evaluation.*</Import>
	</Imports>

	<Observers>
		<!--
			<Observer> <Data name="StepLogger"> <ObjectSource type="BDIAgent"
			name="Sentry" /> <ElementSource type="BDI_BELIEF" name="myPos"
			class="String" /> </Data> <Evaluation mode="periodical" value="1000"
			/> <Filter mode="all" /> </Observer>
		-->
		<Observer>
			<Data name="HomebaseLogger"><!-- TODO: How to deal with Strings, Lists? -->"sodekovs-simulationcontrol/src/main/java/jadex/simulation/TestNegotiationConfiguration.xml"
				<ObjectSource type="ISpaceObject" name="homebase" />
				<ElementSource type="Property" name="ore" class="String" />
				<!-- Add type of element: String, long, int etc.? -->
			</Data>
			<Evaluation mode="onChange" />
			<!-- If perdiocal, all have to have the same value-->
			<Filter mode="all" /> <!-- All / one / subset of objects-JavaCondLanguage -->
		</Observer>
		<Observer>
			<Data name="ExperimentDuration"><!-- TODO: How to deal with Strings, Lists? -->
				<ObjectSource type="ISpaceObject" name="homebase" />
				<ElementSource type="Property" name="duration" class="String" />
				<!-- Add type of element: String, long, int etc.? -->
			</Data>
			<Evaluation mode="onChange" />
			<!-- If perdiocal, all have to have the same value-->
			<Filter mode="last" /> <!-- All / one / subset of objects-JavaCondLanguage -->
			<!--
				"last" denotes, that only the last value is of interest, like for
				the duration time.
			-->
		</Observer>
		<!--
			<Observer> <Data name="11HomebaseLogger"> <ObjectSource
			type="ISpa222ceObject" name="homebase"/> <ElementSource
			type="Pro222perty" name="ore" class="String"/> </Data> <Evaluation
			mode="2onChange"/> <Filter mode="2all"/> </Observer>
		-->
	</Observers>


	<Dataproviders>
		<Dataprovider name="homebaselogger2">
			<!--
				Hack: Should be like this: <Source name="$ore"
				sourcetype="ISpaceObject" objecttype="homebase"
				aggregate="false">$object.ore</Source> <Source name="$homebase"
				sourcetype="ISpaceObject" objecttype="homebase"
				aggregate="false">$object.money</Source>
			-->
			<Sources>
				<Source name="$homebase" sourcetype="ISpaceObject" objecttype="homebase"
					aggregate="false" value="" />
			</Sources>
			<!-- Hack: should have the same structure as the source(s) -->
			<Datas>
				<Data name="ore_amount" value="$homebase.ore" />
				<Data name="time" value="$tick" />
				<Data name="time_2" value="$tick" />
				<!-- <Data name="s_time" value="$homebase.start_time" /> -->
			</Datas>
		</Dataprovider>
		<Dataprovider name="snetrylogger">
			<!--
				Hack: Should be like this: <Source name="$ore"
				sourcetype="ISpaceObject" objecttype="homebase"
				aggregate="false">$object.ore</Source> <Source name="$homebase"
				sourcetype="ISpaceObject" objecttype="homebase"
				aggregate="false">$object.money</Source>
			-->
			<Sources>
				<Source name="$homebase" sourcetype="ISpaceObject" objecttype="homebase"
					aggregate="false" value="" />
			</Sources>
			<!-- Hack: should have the same structure as the source(s) -->
			<Datas>
				<Data name="sentry_amount" value="$homebase.ore" />
				<Data name="sentry_time" value="$tick" filter="last"/>				
				<!-- <Data name="s_time" value="$homebase.start_time" /> -->
			</Datas>
		</Dataprovider>
	</Dataproviders>

	<Dataconsumers>
		<Dataconsumer name="homebaseConsumer" clazz="XYChartDataConsumer">
			<Properties>
				<Property name="dataprovider" value="homebaselogger2" />
				<Property name="title" value="Evaluation of homebase" />
				<Property name="labelx" value="Time" />
				<Property name="labely" value="Collected Ore" />							
				<Property name="seriesname_0" value="Collected Ore" />
				<Property name="valuex_0" value="time" />
				<Property name="valuey_0" value="ore_amount" />
			</Properties>
		</Dataconsumer>
		<Dataconsumer name="homebaseConsumerReloaded" clazz="XYChartDataConsumer">
			<Properties>
				<Property name="dataprovider" value="homebaselogger2" />
				<Property name="title" value="Evaluation of homebase" />
				<Property name="labely" value="Time" />
				<Property name="labelx" value="Collected Ore" />							
				<Property name="seriesname_0" value="Collected Ore" />
				<Property name="valuey_0" value="time" />
				<Property name="valuex_0" value="ore_amount" />
			</Properties>
		</Dataconsumer>
		<Dataconsumer name="homebaseConsumerReloaded2" clazz="CSVFileDataConsumer">
			<Properties>
				<Property name="dataprovider" value="homebaselogger2" />
				<Property name="dataprovider" value="snetrylogger" />
				<Property name="filename" value="testint2222.csv" />
			</Properties>
		</Dataconsumer>
		<Dataconsumer name="simConsumer" clazz="SimulationDataConsumer">
			<Properties>
				<Property name="dataprovider" value="snetrylogger" />				
				<Property name="sentry_time" value="last" /><!-- HACK: FOR FILTZER=LAST -->
			</Properties>
		</Dataconsumer>
	</Dataconsumers>

	<DataVisualization>
		<Input>Reference to a data-field of the observers</Input>
		<Function name="MeanValue" aggregate="all" />
		<!-- DiagramType, Aggregation of different data, text on x/y-axis-->
	</DataVisualization>

	<!-- Optional: -->
	<Persist>
		<!-- Options: Wich filenName, Type, DB-Connector etc.-->
	</Persist>

	<Optimization>
		<!--
			Der Wert dieses Parameters gehört dann auf jeden Fall in die
			LogDatei.
		-->
		<!-- TODO: Nesting of Parameters! -->
		<!--<Data name="PheromoneDiffusion"> -->
		<!--
			Referenz auf oben oder neues
		-->
		<!--
			<ObjectSource type="ISpaceObject" name="Pheromone"/> <ElementSource
			type="Property" name="Diffusion" class="Int"/>
		--><!-- Add type of element: String, long, int etc.? -->
		<!--</Data>-->
		<Data name="NumberOfSentries"> <!-- Referenz to $args.value in application.xml -->
			<ObjectSource type="BDIAgent" name="Sentry" />
			<ElementSource type="AgentNumber" name="AgentNumber"
				class="Int" /><!-- Add type of element: String, long, int etc.? -->
		</Data>
		<!-- Important: Number of sweeps has to be equal with number of rows!-->
		<ParameterSweeping type="space"> <!-- space, list or algorithm (algorithm is not implemented yet!)-->
			<Configuration start="5" end="6" step="1" class="int" />
			<!-- 			<Configuration values="12;17;28;33;"/>--> <!-- Has to be comma separated list, with a comma as last character. -->
		</ParameterSweeping>
		<Algorithm>
			<Input></Input>
			<Configuration></Configuration>
		</Algorithm>
	</Optimization>

	<RunConfiguration>
		<General rows="9" parallelRuns="2" delta="true"><!-- For all runs.-->
			<!-- Delay of start time can be defined relatively or absolute.-->
			<!-- <StartTime value="2010-06-29 10:50:00" type="absolute" /> -->
			<!--<StartTime value="6500" type="relative" />-->

			<!--
				delta=um bei paralleler Ausführung zu Verhindern, dass Seeds von
				Randoms gleich sind.
			-->
			<TerminateCondition>
				<Time value="17000" type="absolute" />
			</TerminateCondition>
		</General>
		<Rows experiments="50">
			<TerminateCondition>
				  <Time value="10000" type="relative" />
				
					<!-- <TargetFunction function="$object.getProperty(&quot;ore&quot;) >=
					25">	<ObjectSource type="ISpaceObject" name="homebase" /> </TargetFunction> -->
				
				<!--
					<TargetFunction function="$beliefbase.tmpCounter>= 13">
					<ObjectSource type="BDIAGENT" name="Sentry" /> </TargetFunction>
				-->
			</TerminateCondition>
		</Rows>
	</RunConfiguration>
</SimulationConfiguration>