<?xml version="1.0" encoding="UTF-8"?>

	<!--
		Document : AutomatedSimulation.xml Created on : 17. Dezember 2009,
		17:25 Updated on: 15-1-10, 19h Author : vilenica Description: Purpose
		of the document follows.
	-->

<SimulationConfiguration name="TestNegotiationStrategies"
	applicationReference="..\\sodekovs-coordination\\src\\main\\java\\deco4mas\\examples\\agentNegotiation\\AgentNegotiation.application.xml"
	applicationConfiguration="agentNegotiation"
	nameOfSpace="mycoordspace">
	
	<Imports>
		<Import>jadex.extension.envsupport.evaluation.*</Import>
		<Import>jadex.extension.envsupport.*</Import>
		<Import>jadex.simulation.evaluation.*</Import>
	</Imports>

	<Dataproviders>
		<Dataprovider name="moneyBankLogger">			
			<Source name="$moneyBank" sourcetype="ISpaceObject" objecttype="moneyBankOfSMA"/> 						
			<Data name="money_amount">$moneyBank.money</Data>
			<Data name="workflows">$moneyBank.executedWorkflows</Data>				
		</Dataprovider>
		<Dataprovider name="moneyBankLogger2">			
			<Source name="$kivsEval" sourcetype="ISpaceObject" objecttype="KIVSeval"/> 						
			<Data name="money_amount">$kivsEval.moneyBankSMA</Data>			
			<Data name="workflows">$kivsEval.executedWorkflows</Data>
			<Data name="Chassisbaubillig">$kivsEval.Chassisbaubillig</Data>
			<Data name="Chassisbaunormal">$kivsEval.Chassisbaunormal</Data>
			<Data name="Chassisbauteuer">$kivsEval.Chassisbauteuer</Data>
			<Data name="ChassisbaubilligTrustValue">$kivsEval.ChassisbaubilligTrustValue</Data>
			<Data name="ChassisbaunormalTrustValue">$kivsEval.ChassisbaunormalTrustValue</Data>
			<Data name="ChassisbauteuerTrustValue">$kivsEval.ChassisbauteuerTrustValue</Data>
			<!--  Measure blackout: How long (TIME) (millisec.) was it and how often (NUMBER)? -->
			<Data name="ChassisbaubilligBlackoutTIME">$kivsEval.ChassisbaubilligBlackoutTIME</Data>
			<Data name="ChassisbaunormalBlackoutTIME">$kivsEval.ChassisbaunormalBlackoutTIME</Data>
			<Data name="ChassisbauteuerBlackoutTIME">$kivsEval.ChassisbauteuerBlackoutTIME</Data>
			<Data name="ChassisbaubilligBlackoutNUMBER">$kivsEval.ChassisbaubilligBlackoutNUMBER</Data>
			<Data name="ChassisbaunormalBlackoutNUMBER">$kivsEval.ChassisbaunormalBlackoutNUMBER</Data>
			<Data name="ChassisbauteuerBlackoutNUMBER">$kivsEval.ChassisbauteuerBlackoutNUMBER</Data>
		</Dataprovider>
	</Dataproviders>

	<Dataconsumers>
		<!-- <Dataconsumer name="homebaseConsumer" clazz="XYChartDataConsumer">
				<Property name="dataprovider">"moneyBankLogger"</Property>
				<Property name="title">"Evaluation of moneyBank of SMA"</Property>
				<Property name="labelx">"Executed Workflows"</Property>
				<Property name="labely">"Money(cumulated)"</Property>							
				<Property name="seriesname_0">"Profit"</Property>
				<Property name="valuex_0">"workflows"</Property>
				<Property name="valuey_0">"money_amount"</Property>
		</Dataconsumer>
		<Dataconsumer name="homebaseConsumerReloaded" clazz="XYChartDataConsumer">
				<Property name="dataprovider">"moneyBankLogger"</Property>
				<Property name="title">"Evaluation of moneyBank of SMA"</Property>
				<Property name="labelx">"Executed Workflows"</Property>
				<Property name="labely">"Money(cumulated)"</Property>											
				<Property name="seriesname_0">"Profit"</Property>
				<Property name="valuex_0">"money_amount"</Property>
				<Property name="valuey_0">"workflows"</Property>				
		</Dataconsumer> -->
		<Dataconsumer name="simConsumer" clazz="SimulationDataConsumer">		
				<Property name="dataprovider">"moneyBankLogger2"</Property>
				<Property name="money_amount" filter="last"/> <!-- filter="last"/>< HACK: Denotes the filter type ->last= only the last value is of interest. -->
				<Property name="workflows" filter="last"/>
				<Property name="Chassisbaubillig" filter="last"/>
				<Property name="Chassisbaunormal" filter="last"/>
				<Property name="Chassisbauteuer" filter="last"/>
				<Property name="ChassisbaubilligTrustValue" filter="last"/>
				<Property name="ChassisbaunormalTrustValue" filter="last"/>
				<Property name="ChassisbauteuerTrustValue" filter="last"/>
				<Property name="ChassisbaubilligBlackoutTIME" filter="last"/>
				<Property name="ChassisbaunormalBlackoutTIME" filter="last"/>
				<Property name="ChassisbauteuerBlackoutTIME" filter="last"/>
				<Property name="ChassisbaubilligBlackoutNUMBER" filter="last"/>
				<Property name="ChassisbaunormalBlackoutNUMBER" filter="last"/>
				<Property name="ChassisbauteuerBlackoutNUMBER" filter="last"/>
		</Dataconsumer>			
	</Dataconsumers>

	<DataVisualization>
		<Input>Reference to a data-field of the observers</Input>
		<Function name="MeanValue" aggregate="all" />
		<!-- DiagramType, Aggregation of different data, text on x/y-axis-->
	</DataVisualization>

	<!-- Optional: -->
	<Persist>
		<!-- Options: Wich filenName, Type, DB-Connector etc.-->
	</Persist>

	<Optimization>
		<!--
			Der Wert dieses Parameters gehört dann auf jeden Fall in die
			LogDatei.
		-->
		<!-- TODO: Nesting of Parameters! -->
		<!--<Data name="PheromoneDiffusion"> -->
		<!--
			Referenz auf oben oder neues
		-->
		<!--
			<ObjectSource type="ISpaceObject" name="Pheromone"/> <ElementSource
			type="Property" name="Diffusion" class="Int"/>
		--><!-- Add type of element: String, long, int etc.? -->
		<!--</Data>-->
		<Data name="TrustWeight"> <!-- Referenz to $args.value in application.xml -->
			<ObjectSource type="BDIAgent" name="SMA" />
			<ElementSource type="AgentNumber" name="AgentNumber"
				class="Double" /><!-- Add type of element: String, long, int etc.? -->
		</Data>
		<Data name="CostWeight"> <!-- Referenz to $args.value in application.xml -->
			<ObjectSource type="BDIAgent" name="SMA" />
			<ElementSource type="AgentNumber" name="AgentNumber"
				class="Double" /><!-- Add type of element: String, long, int etc.? -->
		</Data>
		<Data name="DurationWeight"> <!-- Referenz to $args.value in application.xml -->
			<ObjectSource type="BDIAgent" name="SMA" />
			<ElementSource type="AgentNumber" name="AgentNumber"
				class="Double" /><!-- Add type of element: String, long, int etc.? -->
		</Data>
		<!-- Important: Number of sweeps has to be equal with number of rows!-->
		<ParameterSweeping strategy="linear"> <!-- space, list or algorithm (algorithm is not implemented yet!) -->		
			<Configuration type="list" name="TrustWeight" values="0.2;0.0;0.2;0.2;0.0;0.2;1.0;0.8;0.6;0.4;0.2;0.0;" class="double" /><!-- Has to be comma separated list, with a comma as last character. -->
			<Configuration type="list" name="CostWeight" values="0.8;1.0;0.8;0.8;1.0;0.8;0;0.2;0.4;0.6;0.8;1.0;" class="double" /><!-- "0.0;0.2;0.4;0.6;0.8;1.0;" -->
			<Configuration type="list" name="DurationWeight" values="0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;" class="double" />
		</ParameterSweeping>
		<Algorithm>
			<Input></Input>
			<Configuration></Configuration>
		</Algorithm>
	</Optimization>

	<RunConfiguration>
		<General rows="60" parallelRuns="1" delta="true"><!-- For all runs.-->
			<!-- Delay of start time can be defined relatively or absolute.-->
			<!-- <StartTime value="2010-06-29 10:50:00" type="absolute" /> -->
			<!-- <StartTime value="6500" type="relative" />-->

			<!--
				delta=um bei paralleler Ausführung zu Verhindern, dass Seeds von
				Randoms gleich sind.
			-->
			<TerminateCondition>
				<Time value="15000" type="absolute" />
			</TerminateCondition>
		</General>
		<Rows experiments="10">
			<TerminateCondition>
				  <Time value="120000" type="relative" />				
					<!--<TargetFunction function="$object.getProperty(&quot;executedWorkflows&quot;) >=
					50">	<ObjectSource type="ISpaceObject" name="moneyBankOfSMA" /> </TargetFunction>
														-->					
				<!--
					<TargetFunction function="$beliefbase.tmpCounter>= 13">
					<ObjectSource type="BDIAGENT" name="Sentry" /> </TargetFunction>
				-->
			</TerminateCondition>
		</Rows>
	</RunConfiguration>
</SimulationConfiguration>