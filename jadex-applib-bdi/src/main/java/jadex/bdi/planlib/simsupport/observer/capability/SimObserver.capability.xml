<!--
	<H3>The AMS agent.</H3>
	The agent management system. It is actually represented by
	the AMS class. This agent allows the agent-oriented access
	(per message) to the AMS.
-->
<capability xmlns="http://jadex.sourceforge.net/jadex"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://jadex.sourceforge.net/jadex 
	                    http://jadex.sourceforge.net/jadex-2.0.xsd"
	name="SimObserver"
	package="jadex.bdi.planlib.simsupport.observer.capability">

	<imports>
		<import>java.util.*</import>
		<import>jadex.bdi.planlib.simsupport.environment.*</import>
		<import>jadex.bdi.planlib.simsupport.common.math.*</import>
		<import>jadex.bdi.planlib.simsupport.common.graphics.IViewport</import>
	</imports>

	<capabilities>
	</capabilities>

	<beliefs>
		<!-- Name of the environment -->
		<belief name="environment_name" class="String" exported="true">
			<fact>null</fact>
		</belief>
		
		<!-- Offer canvas access for building a custom GUI. -->
		<belief name="custom_gui" class="Boolean" exported="true">
			<fact>new Boolean(false)</fact>
		</belief>
		
		<!-- Preservation of area aspect ratio in the window -->
		<belief name="preserve_aspect_ratio" class="Boolean" exported="true">
			<fact>new Boolean(true)</fact>
		</belief>
		
		<!-- Force the use of Java2D -->
		<belief name="force_java2d" class="Boolean" exported="true">
			<fact>new Boolean(false)</fact>
		</belief>
		
		<!-- List of themes for displaying objects -->
		<belief name="object_themes" class="List" exported="true">
			<fact>new ArrayList()</fact>
		</belief>
		
		<!-- The pre-layers -->
		<belief name="prelayers" class="List" exported="true">
			<fact>new ArrayList()</fact>
		</belief>
		
		<!-- The post-layers -->
		<belief name="postlayers" class="List" exported="true">
			<fact>new ArrayList()</fact>
		</belief>
		
		<!-- The canvas for integration in a custom GUI.
			 Only exposed if custom_gui is true. -->
		<belief name="canvas" class="java.awt.Canvas" exported="true">
			<fact>null</fact>
		</belief>
		
		<!-- The currently selected theme. -->
		<belief name="selected_theme" class="Integer" exported="true">
			<fact>new Integer(0)</fact>
		</belief>
		
		<belief name="viewport" class="IViewport"/>
    	
		<belief name="local_simulation_engine" class="ISimulationEngine"/>
	</beliefs>

	<goals>
		<!-- Starts the observer -->
		<achievegoal name="simobs_start" exported="true" />
		
		<performgoal name="simobs_update_display" retry="true" retrydelay="33" exclude="never"/>
	</goals>

	<plans>
		<!-- Startup Plan. -->
    	<plan name="start_observer_plan">
      		<body class="StartObserverPlan"/>
      		<trigger>
      			<goal ref="simobs_start"/>
      		</trigger>
    	</plan>
    	
    	<plan name="update_display_locally_plan">
			<body class="LocalUpdateDisplayPlan"/>
			<trigger>
				<goal ref="simobs_update_display"/>
			</trigger>
			<precondition>$beliefbase.local_simulation_engine!=null</precondition>
		</plan>
	</plans>

	<properties>
	</properties>
</capability>