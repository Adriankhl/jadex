apply from: 'util.gradle'

include 'jadex-applications-bdi',
'jadex-applications-bdiv3',
//'jadex-applications-bdibpmn',
'jadex-applications-bpmn',
//'jadex-applications-gpmn',
'jadex-applications-micro',
'jadex-applications-mixed',
'jadex-applications-web',
'jadex-applications-webservice',
'jadex-applications-wfms',
'jadex-commons',
'jadex-javaparser',
'jadex-bridge',
'jadex-xml',
'jadex-json',
'jadex-platform',
'jadex-kernel-micro',
'jadex-rules-eca',
'jadex-kernel-base',
'jadex-platform-standalone-launch',
'jadex-kernel-bpmn',
'jadex-kernel-application',
//'jadex-kernel-gpmn',
'jadex-kernel-component',
//'jadex-kernel-bdibpmn',
'jadex-applib-bdi',
//'jadex-kernel-bdi',
'jadex-kernel-bdiv3',
'jadex-model-bpmn',
'jadex-editor-bpmn',
'jadex-runtimetools-swing',
'jadex-tools-bdi',
'jadex-tools-bpmn',
'jadex-tools-comanalyzer',
'jadex-rules',
'jadex-rules-tools',
'jadex-kernel-extension-agr',
'jadex-kernel-extension-envsupport',
'jadex-kernel-extension-envsupport-opengl',
'jadex-kernel-extension-envsupport-jmonkey',
'jadex-tools-base-swing',
'jadex-tools-base',
'jadex-tools-benchmarks',
'jadex-servletfilter',
'jadex-servletfilter-web',
'jadex-rules-applications',
'jadex-platform-relay-web',
'jadex-platform-extension-relay',
'jadex-platform-extension-relay-standalone',
'jadex-platform-extension-webservice',
'jadex-platform-extension-webservice-desktop',
'jadex-platform-extension-webservice-desktop-grizzly',
'jadex-platform-extension-webservice-desktop-jetty',
'jadex-platform-extension-securetransport',
'jadex-platform-extension-management',
'jadex-platform-extension-maven',
'jadex-editor-gpmn',
'jadex-distribution-minimal',
'jadex-distribution-server',
'jadex-distribution-standard',
'jadex-distribution-pro',
// the plugins depend on other projects to be deployed, so they have to be standalone
//'jadex-android-maven-plugin',
'jadex-gradle-plugin'
// android-specific modules:
if (androidSdkExists()) {
    include 'jadex-android-antlr',
    'jadex-android-commons',
    'jadex-android-xmlpull',
    'jadex-android-bluetooth',
//    'jadex-android-integration-test',
//    'jadex-android-maven-plugin',
    'jadex-android-platformclient',
//    'jadex-android-testlauncher',

    'jadex-kernel-bdiv3-android',
    'jadex-platform-android',
    'jadex-platform-extension-webservice-android',
    'jadex-runtimetools-android'


    def pluginBootstrap = System.getProperty('gradlePluginBootstrap')

    if (!pluginBootstrap && !calledWithTask('uploadGradlePluginArchives')) {
        include\
        'jadex-applications-android:jadex-applications-android-chat',
        'jadex-applications-android:jadex-applications-android-puzzle',
        'jadex-applications-android-demos',
        'jadex-android-platformapp'
    }

} else {
    logger.warn('Cannot compile android projects: No Android SDK found.\n' +
            'To include android projects in build, set ANDROID_HOME to your android sdk root.')
}

//include 'jadex-test'

def androidSdkExists() {
    def androidHome = System.env.'ANDROID_HOME'
    if (androidHome != null && !androidHome.isEmpty()) {
        def adb = new File(androidHome + "/platform-tools/adb")
        return adb.exists();
    }
    return false;
}
