<?xml version="1.0" encoding="UTF-8"?>
<!--
	<H3>Disaster Rescue Scenario</H3>
	
	Shows coordination of rescue teams for handling
	different kinds of disaster situation.
-->
<applicationtype xmlns="http://jadex.sourceforge.net/jadex-application"
	xmlns:env="http://jadex.sourceforge.net/jadex-envspace"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://jadex.sourceforge.net/jadex-application 
	                    http://jadex.sourceforge.net/jadex-application-2.0.xsd
	                    http://jadex.sourceforge.net/jadex-envspace 
	                    http://jadex.sourceforge.net/jadex-envspace-2.0.xsd"
	name="DisasterRescue" package="jadex.bdi.examples.disasterrescue">
	
	<imports>
		<import>jadex.application.space.envsupport.environment.*</import>
		<import>jadex.application.space.envsupport.environment.space2d.*</import>
		<import>jadex.application.space.envsupport.math.*</import>
		<import>jadex.application.space.envsupport.dataview.*</import>
		<import>jadex.application.space.envsupport.observer.perspective.*</import>
	</imports>
	
	<spacetypes>
		<env:envspacetype name="2dspace" class="ContinuousSpace2D" width="1" height="1">
			<env:objecttypes>
				<env:objecttype name="disaster">
					<env:property name="type" class="String"/>
					<env:property name="severe" class="boolean"/>
					<env:property name="size" class="int"/>
					<env:property name="victims" class="int"/>
					<env:property name="fire" class="int"/>
					<env:property name="chemicals" class="int"/>
				</env:objecttype>
			</env:objecttypes>
			
			<env:processtypes>
				<env:processtype name="create" class="DefaultObjectCreationProcess">
					<env:property name="tickrate">30</env:property>
					<env:property name="type">"disaster"</env:property>
					<env:property name="properties" dynamic="true">
						DisasterType.generateDisaster()
					</env:property>
				</env:processtype>
			</env:processtypes>
						
			<env:dataviews>
				<env:dataview name="all_view" class="GeneralDataView2D" />
			</env:dataviews>
			
						
			<env:perspectives>
				<env:perspective name="icons" class="Perspective2D" opengl="true">
					<env:drawable objecttype="disaster" width="0.08" height="0.08">
						<env:property name="drawsize" dynamic="true">new Vector2Double($object.getProperty("size").intValue()*0.005)</env:property>
						<env:ellipse layer="1" size="drawsize" abssize="true" color="#FAFA1E99">
							<env:drawcondition>!$object.getProperty("severe")</env:drawcondition>
						</env:ellipse>
						<env:ellipse layer="1" size="drawsize" abssize="true" color="#FA1E1E99">
							<env:drawcondition>$object.getProperty("severe")</env:drawcondition>
						</env:ellipse>
						<env:texturedrectangle layer="2" height="1" width="1" imagepath="jadex/bdi/examples/disasterrescue/images/carcrash.png">
							<env:drawcondition>$object.getProperty("type").equals("Car Crash")</env:drawcondition>
						</env:texturedrectangle>
						<env:texturedrectangle layer="2" height="1" width="1" imagepath="jadex/bdi/examples/disasterrescue/images/explosion.png">
							<env:drawcondition>$object.getProperty("type").equals("Explosion")</env:drawcondition>
						</env:texturedrectangle>
						<env:texturedrectangle layer="2" height="1" width="1" imagepath="jadex/bdi/examples/disasterrescue/images/chemicals.png">
							<env:drawcondition>$object.getProperty("type").equals("Chemical Leakage")</env:drawcondition>
						</env:texturedrectangle>
						<env:texturedrectangle layer="2" height="1" width="1" imagepath="jadex/bdi/examples/disasterrescue/images/earthquake.png">
							<env:drawcondition>$object.getProperty("type").equals("Earthquake")</env:drawcondition>
						</env:texturedrectangle>
						<env:text layer="3" x="0.04" y="-0.02" size="6" font="Arial" abssize="true" text="victims: $victims$\nfire: $fire$\nchemicals: $chemicals$" align="left" color="black"/>
					</env:drawable>

					<env:prelayers>
						<env:tiledlayer width="1" height="1" imagepath="jadex/bdi/examples/disasterrescue/images/map.jpg" />
					</env:prelayers>
				</env:perspective>
			</env:perspectives>

			<!-- executor -->
			<env:spaceexecutor class="DeltaTimeExecutor">
				<env:property name="space">$space</env:property>
				<env:property name="tick">true</env:property>
			</env:spaceexecutor>
		</env:envspacetype>
	</spacetypes>

	<applications>
		<application name="default">
			<spaces>
				<env:envspace name="my2dspace" type="2dspace">
					<env:processes>
						<env:process type="create"/>
					</env:processes>
					<env:observers>
						<env:observer name="DisasterRescue" dataview="view_all" perspective="icons"/>
					</env:observers>
	 			</env:envspace>
			</spaces>
 		</application>
	</applications>

</applicationtype>
