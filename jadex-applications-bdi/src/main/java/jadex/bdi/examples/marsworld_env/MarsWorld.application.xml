<!--
	<H3>The marsworld application descriptor</H3>

	Can be used to launch the mars world example.<br>

	It consists of three different kinds of agents:<br>
	- <b>Sentry agents</b> are responsible for examining ore locations<br>
		A ore capacity is shown on the map when an ore location was examined.<br>
	- <b>Production agents</b> produce ore at available ore location.<br>
	- <b>Carry agents</b> are able to carry ore to the base.<br><br>

	Objective is to carry as much ore as possible to the<br>
	homebase in a predefined mission time.<br>-->

<applicationtype xmlns="http://jadex.sourceforge.net/jadex"
	xmlns:env="http://jadex.sourceforge.net/jadex-env"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://jadex.sourceforge.net/jadex-appdescriptor 
	                    http://jadex.sourceforge.net/jadex-appdescriptor.xsd"
	name="MarsWorld" package="jadex.bdi.examples.marsworld_env">
	
	<imports>
		<import>jadex.adapter.base.envsupport.environment.space2d.*</import>
		<import>jadex.adapter.base.envsupport.environment.RoundBasedExecutor</import>
		<import>jadex.adapter.base.envsupport.math.*</import>
		<import>jadex.bridge.IClockService</import>
		<import>jadex.adapter.base.envsupport.dataview.*</import>
		<import>java.text.SimpleDateFormat</import>
		<import>java.util.Date</import>
	</imports>
	
	<spacetypes>
		<env:envspacetype name="2dspace" class="ContinuousSpace2D" width="1.5" height="1.5">
			<env:objecttypes>
				<env:objecttype name="target" />
				<env:objecttype name="sentry" />
				<env:objecttype name="producer" />
				<env:objecttype name="carry" />
				<env:objecttype name="homebase">
					<env:property name="text">
						"Collected ore: "+$object.getProperty("ore")+" \n"+
						"Remaining time: "+new SimpleDateFormat("mm:ss").format(new Date($object.getProperty("missiontime")
							- $object.getProperty("space").getContext().getPlatform().getService(IClockService.class).getTime()))
					</env:property>
				</env:objecttype>
			</env:objecttypes>
									
			<env:avatarmappings>
				<env:avatarmapping agenttype="Sentry" objecttype="sentry"/>
				<env:avatarmapping agenttype="Producer" objecttype="producer"/>
				<env:avatarmapping agenttype="Carry" objecttype="carry"/>
			</env:avatarmappings>

			<env:views>
				<env:view name="all_view" class="GeneralDataView2D" />
			</env:views>

			<env:perspectives>
				<env:perspective name="icons">
					<env:drawable objecttype="target" width="0.1" height="0.1">
						<env:regularpolygon layer="0" width="0.2" height="0.2" vertices="36" color="#C8000096" />
						<!-- marked target. -->
						<!-- <env:regularpolygon layer="0" width="0.2" height="0.2" vertices="36" color="#C32323296" /> -->
					</env:drawable>
					<env:drawable objecttype="homebase" width="0.14" height="0.12">
						<env:rectangle layer="1" width="1" height="1" color="#1e1e1e46" />
						<env:text layer="2" x="0.0" y="0.08" basesize="90" text="$text$" color="black"/>
					</env:drawable>
					<env:drawable objecttype="sentry" width="0.1" height="0.1">
						<env:texturedrectangle layer="0" imagepath="jadex/bdi/examples/marsworld_env/images/sentry.png" />
					</env:drawable>
					<env:drawable objecttype="producer" width="0.1" height="0.1">
						<env:texturedrectangle layer="0" imagepath="jadex/bdi/examples/marsworld_env/images/producer.png" />
					</env:drawable>
					<env:drawable objecttype="carry" width="0.1" height="0.1">
						<env:texturedrectangle layer="0" imagepath="jadex/bdi/examples/marsworld_env/images/carry.png" />
					</env:drawable>
					<env:prelayers>
						<env:tiledlayer width="1.7" height="1.7" imagepath="jadex/bdi/examples/marsworld_env/images/mars.png" />
					</env:prelayers>
				</env:perspective>
			</env:perspectives>
		</env:envspacetype>
	</spacetypes>

	<agenttypes>
		<agenttype name="Sentry" filename="jadex/bdi/tutorial/TranslationA1.agent.xml"/>
		<agenttype name="Producer" filename="jadex/bdi/tutorial/TranslationA1.agent.xml"/>
		<agenttype name="Carry" filename="jadex/bdi/tutorial/TranslationA1.agent.xml"/>
	</agenttypes>

	<applications>
		<application name="1 Sentry / 2 Producers / 3 Carries">
			<agents>
				<agent type="Sentry" number="1"/>
				<agent type="Producer" number="2"/>
				<agent type="Carry" number="3"/>
			</agents>

			<env:envspace name="my2dspace" type="2dspace">
				<env:objects>
					<env:object type="homebase">
						<env:property name="position">new Vector2Double(0.3, 0.3)</env:property>
						<env:property name="space">$space</env:property><!-- hack!!! -->
						<env:property name="missiontime">
							90000 + $space.getContext().getPlatform().getService(IClockService.class).getTime()
						</env:property>
						<env:property name="ore">0</env:property>
					</env:object>
					<env:object type="target">
						<env:property name="position">new Vector2Double(0.1, 0.2)</env:property>
						<env:property name="ore">0</env:property>
					</env:object>
					<env:object type="target">
						<env:property name="position">new Vector2Double(0.05, 0.7)</env:property>
						<env:property name="ore">200</env:property>
					</env:object>
					<env:object type="target">
						<env:property name="position">new Vector2Double(0.5, 0.6)</env:property>
						<env:property name="ore">0</env:property>
					</env:object>
					<env:object type="target">
						<env:property name="position">new Vector2Double(0.8, 0.1)</env:property>
						<env:property name="ore">50</env:property>
					</env:object>
					<env:object type="target">
						<env:property name="position">new Vector2Double(0.7, 0.4)</env:property>
						<env:property name="ore">100</env:property>
					</env:object>
					<env:object type="target">
						<env:property name="position">new Vector2Double(0.8, 0.8)</env:property>
						<env:property name="ore">25</env:property>
					</env:object>
				</env:objects>
				<env:observers>
					<env:observer name="MarsWorld" view="view_all" perspective="icons"/>
				</env:observers>
 			</env:envspace>
 		</application>
	</applications>

</applicationtype>
