<?xml version="1.0" encoding="UTF-8"?>

	<!--
		Document : AutomatedSimulation.xml Created on : 17. Dezember 2009,
		17:25 Updated on: 15-1-10, 19h Author : vilenica Description: Purpose
		of the document follows. -> "1 Sentry / 2 Producers / 3 Carries" / TestRemote <-
	-->

<SimulationConfiguration name="MarsWorldExperiments"
	applicationReference="..\\sodekovs-applications\\target\\classes\\sodekovs\\marsworld\\MarsWorld4SimulationExperimentsANDCoordSpace.application.xml"
	applicationConfiguration="StandardConfiguation"	 
	nameOfSpace="my2dspace">


	<Imports>		
		<Import>jadex.extension.envsupport.evaluation.XYChartDataConsumer</Import>		
		<Import>jadex.extension.envsupport.environment.*</Import>
		<Import>jadex.simulation.evaluation.*</Import>
	</Imports>

	<Dataproviders>
		<Dataprovider name="homebaselogger2">
			<!-- <Source name="$ore" sourcetype="ISpaceObject" objecttype="homebase" aggregate="false">$object.ore</Source>-->
			<Source name="$homebase" sourcetype="ISpaceObject" objecttype="homebase"/> 						
			<Data name="ore_amount">$homebase.ore</Data>
			<Data name="time">$tick</Data>				
		</Dataprovider>
		<Dataprovider name="homebaselogger223">
			<!-- <Source name="$ore" sourcetype="ISpaceObject" objecttype="homebase" aggregate="false">$object.ore</Source>-->
			<Source name="$homebase" sourcetype="ISpaceObject" objecttype="homebase"/> 						
			<Data name="ore_amount">$homebase.ore</Data>
			<Data name="time">$tick</Data>				
		</Dataprovider>
	</Dataproviders>

	<Dataconsumers>
		<Dataconsumer name="homebaseConsumer" clazz="XYChartDataConsumer">
				<Property name="dataprovider">"homebaselogger2"</Property>
				<Property name="title">"Evaluation of homebase"</Property>
				<Property name="labelx">"Time"</Property>
				<Property name="labely">"Collected Ore"</Property>							
				<Property name="seriesname_0">"Collected Ore"</Property>
				<Property name="valuex_0">"time"</Property>
				<Property name="valuey_0">"ore_amount"</Property>
		</Dataconsumer>
		<Dataconsumer name="homebaseConsumerReloaded" clazz="XYChartDataConsumer">
				<Property name="dataprovider">"homebaselogger2"</Property>
				<Property name="title">"Evaluation of homebase"</Property>				
				<Property name="labelx">"Collected Ore"</Property>			
				<Property name="labely">"Time"</Property>				
				<Property name="seriesname_0">"Collected Ore"</Property>				
				<Property name="valuex_0">"ore_amount"</Property>
				<Property name="valuey_0">"time"</Property>
		</Dataconsumer>
		<Dataconsumer name="simConsumer" clazz="SimulationDataConsumer">		
				<Property name="dataprovider">"homebaselogger2"</Property>
				<Property name="time" filter="last"/><!-- HACK: Denotes the filter type ->last= only the last value is of interest. --> 
		</Dataconsumer>
		 
		<!--<Dataconsumer name="homebaseConsumer" clazz="SimulationLogger">
				<Property name="dataprovider">"homebaselogger2"</Property>
				<Property name="title">"Logging Simulation"</Property>
				<Property name="filelocation">"C:\simulation\marsworld.log"</Property>
		</Dataconsumer>-->		
	</Dataconsumers>

	<DataVisualization>
		<Input>Reference to a data-field of the observers</Input>
		<Function name="MeanValue" aggregate="all" />
		<!-- DiagramType, Aggregation of different data, text on x/y-axis-->
	</DataVisualization>

	<!-- Optional: -->
	<Persist>
		<!-- Options: Which filenName, Type, DB-Connector etc.-->
		<!--  type="file"/"DB" -->
		<!-- File Location -->
	</Persist>

	<Optimization>
		<!--
			Der Wert dieses Parameters gehört dann auf jeden Fall in die
			LogDatei.
		-->
		<!-- TODO: Nesting of Parameters! -->
		<!--<Data name="PheromoneDiffusion"> -->
		<!--
			Referenz auf oben oder neues
		-->
		<!--
			<ObjectSource type="ISpaceObject" name="Pheromone"/> <ElementSource
			type="Property" name="Diffusion" class="Int"/>
		--><!-- Add type of element: String, long, int etc.? -->
		<!--</Data>-->
		<Data name="NumberOfSentries"> <!-- Referenz to $args.value in application.xml -->
			<ObjectSource type="BDIAgent" name="Sentry" />
			<ElementSource type="AgentNumber" name="AgentNumber"
				class="Int" /><!-- Add type of element: String, double, int -->
		</Data>
		
		<Data name="NumberOfProducers"> <!-- Referenz to $args.value in application.xml -->
			<ObjectSource type="BDIAgent" name="Producer" />
			<ElementSource type="AgentNumber" name="AgentNumber"
				class="Int" /><!-- Add type of element: String, double, int -->
		</Data>
		
		<Data name="NumberOfCarries"> <!-- Referenz to $args.value in application.xml -->
			<ObjectSource type="BDIAgent" name="Carry" />
			<ElementSource type="AgentNumber" name="AgentNumber"
				class="Int" /><!-- Add type of element: String, double, int -->
		</Data>
		
		
		<!-- !!!!!!Important: Number of sweeps has to be equal with number of rows!!!!!! -->
		<ParameterSweeping strategy="linear"> <!-- Strategy can be either linear or recursively -->
			<Configuration type="list" name="NumberOfCarries" values="1;2;3;" class="int" /><!-- space, list or algorithm (algorithm is not implemented yet!)-->
			<Configuration type="list" name="NumberOfSentries" values="4;5;6;" class="int" />			
			<Configuration type="space" name="NumberOfProducers" start="1" end="3" step="1" class="int" />
			<!-- <Configuration type="list" name="NumberOfProducers" values="1;2;" class="int" />--><!-- Has to be comma separated list, with a comma as last character. -->			
		</ParameterSweeping>
		<Algorithm>
			<Input></Input>
			<Configuration></Configuration>
		</Algorithm>
	</Optimization>

	<RunConfiguration>
		<General rows="3" parallelRuns="1" delta="true"><!-- For all runs.-->
			<!-- Delay of start time can be defined relatively or absolute.-->
			<!-- <StartTime value="2010-06-29 10:50:00" type="absolute" /> -->
			<!-- <StartTime value="6500" type="relative" />-->

			<!--
				delta=um bei paralleler Ausführung zu Verhindern, dass Seeds von
				Randoms gleich sind.
			-->
			<TerminateCondition>
				<Time value="30000" type="absolute" />
			</TerminateCondition>
		</General>
		<Rows experiments="3">
			<TerminateCondition>
				    <Time value="30000" type="relative" />
				  				
			 		<TargetFunction function="$object.getProperty(&quot;ore&quot;) >=
					55">	<ObjectSource type="ISpaceObject" name="homebase" /> </TargetFunction> 
				
				<!--
					<TargetFunction function="$beliefbase.tmpCounter>= 13">
					<ObjectSource type="BDIAGENT" name="Sentry" /> </TargetFunction>
				-->
			</TerminateCondition>
		</Rows>
	</RunConfiguration>
</SimulationConfiguration>