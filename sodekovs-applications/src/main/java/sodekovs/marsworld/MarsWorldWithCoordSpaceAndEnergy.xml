<?xml version="1.0" encoding="UTF-8"?>
<SimulationConfiguration name="MarsWorldExperiments"
	applicationReference="../sodekovs-applications/target/classes/sodekovs/marsworld/MarsWorld4SASO.application.xml"
	applicationConfiguration="StandardConfiguation"	 
	nameOfSpace="my2dspace"
	description="Nearest and random, adaptation 30s start delay, 50 experiment(s), failure after 60s">

	<Imports>		
		<Import>jadex.extension.envsupport.evaluation.XYChartDataConsumer</Import>		
		<Import>jadex.extension.envsupport.environment.*</Import>
		<Import>jadex.simulation.evaluation.*</Import>
	</Imports>

	<Dataproviders>
		<Dataprovider name="simulationlogger">
		    <Source name="$homebase" sourcetype="ISpaceObject" objecttype="homebase"/>
		    <Source name="$energyCosts" sourcetype="ISpaceObject" objecttype="energyCosts"/>
		    <Source name="$ore" sourcetype="ISpaceObject" objecttype="ore"/>
		    <Source name="$soMessages" sourcetype="ISpaceObject" objecttype="soMessages"/>
		    <Source name="$adaptation" sourcetype="ISpaceObject" objecttype="adaptation"/>
		    <Data name="ore_amount">$homebase.ore</Data>
		    <Data name="time">$tick</Data>
		    <Data name="energy_costs">$energyCosts.costs</Data>
		    <Data name="adaptation_costs">$energyCosts.adaptationCosts</Data>
		    <Data name="collectedOre">$homebase.ore</Data>
		    <Data name="sensedOre">$ore.sensedOre</Data>
		    <Data name="producedOre">$ore.producedOre</Data>
		    <Data name="targetSeen">$soMessages.targetSeen</Data>
		    <Data name="targetAnalyzed">$soMessages.targetAnalyzed</Data>
		    <Data name="targetProduced">$soMessages.targetProduced</Data>
		    <Data name="votingAttempts">$adaptation.votingAttempts</Data>
		    <Data name="adaptations">$adaptation.adaptations</Data>
		    <Data name="failures">$adaptation.failures</Data>
		</Dataprovider>
	</Dataproviders>

	<Dataconsumers>
		<Dataconsumer name="homebaseConsumer" clazz="XYChartDataConsumer">
				<Property name="dataprovider">"simulationlogger"</Property>
				<Property name="title">"Evaluation of homebase"</Property>
				<Property name="labelx">"Time"</Property>
				<Property name="labely">"Collected Ore"</Property>							
				<Property name="seriesname_0">"Collected Ore"</Property>
				<Property name="valuex_0">"time"</Property>
				<Property name="valuey_0">"ore_amount"</Property>
		</Dataconsumer>
		<Dataconsumer name="energycostsConsumer" clazz="XYChartDataConsumer">
				<Property name="dataprovider">"simulationlogger"</Property>
				<Property name="title">"Evaluation of energy costs"</Property>				
				<Property name="labelx">"Time"</Property>			
				<Property name="labely">"Energy Costs"</Property>				
				<Property name="seriesname_0">"Energy Costs"</Property>				
				<Property name="valuex_0">"time"</Property>
				<Property name="valuey_0">"energy_costs"</Property>
		</Dataconsumer>
		<Dataconsumer name="adaptationcostsConsumer" clazz="XYChartDataConsumer">
				<Property name="dataprovider">"simulationlogger"</Property>
				<Property name="title">"Evaluation of adaptation costs"</Property>				
				<Property name="labelx">"Time"</Property>			
				<Property name="labely">"Adaptation Costs"</Property>				
				<Property name="seriesname_0">"Adaptation Costs Costs"</Property>				
				<Property name="valuex_0">"time"</Property>
				<Property name="valuey_0">"adaptation_costs"</Property>
		</Dataconsumer>
		<Dataconsumer name="simConsumer" clazz="SimulationDataConsumer">		
				<Property name="dataprovider">"simulationlogger"</Property>
				<Property name="time" filter="last"/><!-- HACK: Denotes the filter type ->last= only the last value is of interest. -->
				<Property name="ore_amount" filter="last"/>
				<Property name="energy_costs" filter="last"/> 
				<Property name="adaptation_costs" filter="last"/>
				<Property name="collectedOre" filter="last"/> 
				<Property name="sensedOre" filter="last"/> 
				<Property name="producedOre" filter="last"/> 
				<Property name="targetSeen" filter="last"/> 
				<Property name="targetAnalyzed" filter="last"/> 
				<Property name="targetProduced" filter="last"/> 
				<Property name="votingAttempts" filter="last"/> 
				<Property name="adaptations" filter="last"/> 
				<Property name="failures" filter="last"/> 
		</Dataconsumer>	
	</Dataconsumers>

	<DataVisualization>
		<Input>Reference to a data-field of the observers</Input>
		<Function name="MeanValue" aggregate="all" />
		<!-- DiagramType, Aggregation of different data, text on x/y-axis-->
	</DataVisualization>

	<!-- Optional: -->
	<Persist>
		<!-- Options: Which filenName, Type, DB-Connector etc.-->
		<!--  type="file"/"DB" -->
		<!-- File Location -->
	</Persist>

	<Optimization/>

	<RunConfiguration>
		<General rows="1" parallelRuns="1" delta="true"/>
		<Rows experiments="50">
			<TerminateCondition>
			    <Time value="300000" type="relative" />
				<TargetFunction function="$object.getProperty(&quot;ore&quot;) >= 1000">
				    <ObjectSource type="ISpaceObject" name="homebase"/>
				</TargetFunction>
			</TerminateCondition>
		</Rows>
	</RunConfiguration>
</SimulationConfiguration>