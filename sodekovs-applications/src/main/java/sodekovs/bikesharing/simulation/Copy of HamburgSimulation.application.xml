<!-- The simulation startup -->

<applicationtype xmlns="http://jadex.sourceforge.net/jadex"
	xmlns:env="http://jadex.sourceforge.net/jadex-envspace"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://jadex.sourceforge.net/jadex 
	                    http://jadex.sourceforge.net/jadex-application-2.0.xsd
	                    http://jadex.sourceforge.net/jadex-envspace 
	                    http://jadex.sourceforge.net/jadex-envspace-2.0.xsd"
	name="Copy of HamburgSimulation" package="sodekovs.bikesharing.simulation">

	<imports>
		<import>jadex.extension.envsupport.environment.space2d.*</import>
		<import>jadex.extension.envsupport.environment.RoundBasedExecutor</import>
		<import>jadex.extension.envsupport.math.*</import>
		<import>jadex.extension.envsupport.math.Vector2Int</import>
		<import>jadex.extension.envsupport.math.IVector3</import>
		<import>jadex.extension.envsupport.math.Vector2Double</import>		
		<import>jadex.extension.envsupport.evaluation.CSVFileDataConsumer</import>
		<import>jadex.extension.envsupport.observer.perspective.*</import>
		<import>jadex.extension.envsupport.dataview.GeneralDataView2D</import>
		<import>jadex.extension.envsupport.dataview.*</import>						
		<import>jadex.bridge.service.types.clock.IClockService</import>
		<import>jadex.bridge.service.search.*</import>		
		<import>jadex.bridge.service.*</import>
		<import>jadex.commons.future.*</import>
		<import>sodekovs.bikesharing.container.Weg</import>
		<import>sodekovs.bikesharing.fahrrad.FahrradVerleihStation</import>
		<import>sodekovs.bikesharing.pedestrian.*</import>
		<import>sodekovs.bikesharing.pedestrian.movement.*</import>
		<import>sodekovs.bikesharing.env.*</import>
	</imports>

	<extensiontypes>
		<env:envspacetype name="GeneralSimulation" width="100" height="100" class="ContinuousSpace2D">

			<env:processtypes>
				<env:processtype name="init" class="CreatePedestriansProcess" />
			</env:processtypes>

			<!-- Entwurfsentscheidung: Verkehrsmittel haben die Eigenschaft, ob sie 
				gerade offen sind, und ihre Linie. Alle anderen Eigenschaften (naechstes 
				Ziel, ..) sind nicht öffentlich und somit nicht für andere einsehbar -->
			<env:objecttypes>
			
			<env:objecttype name="pedestrian">
					<env:property name="vision">0.15</env:property>
					<env:property name="vision_range">0.3</env:property>
					<env:property name="speed">0.05</env:property>
					<!-- <env:property name="position" dynamic="true">$space.getSpaceObjectsByType("nest")[0].getProperty("position")</env:property> -->					
				</env:objecttype>				
			
			
			
				
			</env:objecttypes>

			<env:avatarmappings>
				<env:avatarmapping componenttype="Pedestrian"
					objecttype="pedestrian" />		
			
			
			
				
			</env:avatarmappings>
			
			<env:tasktypes>
				<env:tasktype name="move" class="MoveTask" />							
			</env:tasktypes>

			<env:perspectives>
				<env:perspective name="main" class="Perspective2D"	opengl="true" objectplacement="center">
				
				
				<!-- Pedestrian -->
					<env:drawable objecttype="pedestrian" width="0.07" height="0.07">
						<env:property name="visionsize" dynamic="true">new Vector2Double($object.getProperty("vision").doubleValue()*2)</env:property>
						<env:ellipse layer="1" size="visionsize" abssize="true"
							color="#FAFA1E32" />
						<env:texturedrectangle layer="2"
							imagepath="sodekovs/bikesharing/bilder/pedestrian.jpg" />
					</env:drawable>		
				
				
				
				
				
				
				
				
					<env:prelayers>
						<env:tiledlayer width="1" height="1" imagepath="sodekovs/bikesharing/bilder/map.png" />
					</env:prelayers>
				</env:perspective>
			</env:perspectives>

			<env:dataviews>
				<env:dataview name="view_all" class="GeneralDataView2D" />
			</env:dataviews>

			<env:spaceexecutor class="RoundBasedExecutor">
				<env:property name="space">$space</env:property>
			</env:spaceexecutor>
		</env:envspacetype>
	</extensiontypes>

	<componenttypes>
	
	<componenttype name="Pedestrian"
			filename="sodekovs/bikesharing/pedestrian/Pedestrian.agent.xml" />
			
			
			
		
	</componenttypes>

	<properties>
		<property name="clock" class="IFuture">SServiceProvider.getService($component.getServiceProvider(), IClockService.class, RequiredServiceInfo.SCOPE_PLATFORM)</property>
	</properties>
	
	<configurations>
		<configuration name="Standard">
			<extension>
				<env:envspace name="my2dspace" type="GeneralSimulation" width="100" height="100">				
					<env:processes>
						<env:process type="init"/>								
					</env:processes>

				
  					<env:observers> 
  						<env:observer name="world" dataview="view_all"
  							perspective="main" /> 
  					</env:observers> 
				</env:envspace>
			</extension>
			
			<!-- <components>
				<component type="Pedestrian" number="2" />
			</components> -->	
		
		</configuration>
	</configurations>


</applicationtype>


